(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{133:function(e,t){},135:function(e,t){},153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(10),i=a.n(c),r=a(193),s=a(195),o=a(196),l=a(197),d=a(205),j=a(190),m=a(93),x=a.n(m),b=a(92),h=a.n(b),p=a(86),u=a(61),O=a.n(u),g=a(2);const y=Object(n.createContext)(),f=Object(p.io)("https://socketoi-backend-production.up.railway.app",{transports:["websocket"]}),v=e=>{let{children:t}=e;const[a,c]=Object(n.useState)(!1),[i,r]=Object(n.useState)(!1),[s,o]=Object(n.useState)(),[l,d]=Object(n.useState)(""),[j,m]=Object(n.useState)({}),[x,b]=Object(n.useState)(""),h=Object(n.useRef)(),p=Object(n.useRef)(),u=Object(n.useRef)();console.log("socket",f),Object(n.useEffect)((()=>{f.on("me",(e=>b(e))),f.on("callUser",(e=>{let{from:t,name:a,signal:n}=e;m({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(g.jsx)(y.Provider,{value:{call:j,callAccepted:a,myVideo:h,userVideo:p,stream:s,name:l,setName:d,callEnded:i,me:x,callUser:e=>{const t=new O.a({initiator:!0,trickle:!1,stream:s});t.on("signal",(t=>{f.emit("callUser",{userToCall:e,signalData:t,from:x,name:l})})),t.on("stream",(e=>{p.current.srcObject=e})),f.on("callAccepted",(e=>{c(!0),t.signal(e)})),u.current=t},leaveCall:()=>{r(!0),u.current.destroy(),window.location.reload()},answerCall:()=>{c(!0);const e=new O.a({initiator:!1,trickle:!1,stream:s});e.on("signal",(e=>{f.emit("answerCall",{signal:e,to:j.from})})),e.on("stream",(e=>{p.current.srcObject=e})),e.signal(j.signal),u.current=e},startStream:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(e),h.current.srcObject=e}catch(e){console.error("Failed to get media devices:",e)}}},children:t})},C=Object(j.a)((e=>({video:{width:"400px",[e.breakpoints.down("xs")]:{width:"300px"}},gridContainer:{justifyContent:"center",[e.breakpoints.down("xs")]:{flexDirection:"column"}},paper:{padding:"10px",border:"2px solid black",margin:"10px"}})));var w=()=>{const{name:e,callAccepted:t,myVideo:a,userVideo:c,callEnded:i,stream:d,call:j,callUser:m,startStream:b}=Object(n.useContext)(y),p=C();return console.log("myVideo",a),console.log("userVideo",c),console.log("callUser",m),Object(g.jsx)(r.a,{maxWidth:"md",children:Object(g.jsxs)(s.a,{container:!0,className:p.gridContainer,justify:"center",spacing:1,children:[Object(g.jsx)(s.a,{item:!0,xs:12,md:12,children:Object(g.jsxs)(o.a,{variant:"h4",component:"p",gutterBottom:!0,style:{textAlign:"center",marginTop:"2rem"},children:["Ready to join a"," ",Object(g.jsx)("span",{style:{color:"#2ea7e4",fontSize:"2rem"},children:"Talky"})," ","video chat?"]})}),Object(g.jsx)(s.a,{item:!0,xs:12,md:12,justify:"center",children:Object(g.jsx)(o.a,{variant:"p",component:"p",gutterBottom:!0,noWrap:!1,color:"textSecondary",style:{textAlign:"center"},children:"Talky is truly simple video chat and screen sharing for groups. Learn more about talky."})}),Object(g.jsxs)(s.a,{item:!0,xs:12,md:5,style:{marginRight:"0.25rem"},children:[Object(g.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:e||"You"}),Object(g.jsx)(s.a,{style:{background:!d&&"#454545"},children:Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:a,autoPlay:!0,className:p.video})})]}),!d&&Object(g.jsxs)(s.a,{item:!0,xs:12,md:5,style:{justifyContent:"center",alignContent:"center"},children:[Object(g.jsxs)(o.a,{variant:"h6",component:"p",gutterBottom:!0,color:"textSecondary",children:[Object(g.jsxs)("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",children:[Object(g.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(g.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})]}),"Camera:"]}),Object(g.jsx)(l.a,{variant:"outlined",color:"default",startIcon:Object(g.jsx)(h.a,{}),onClick:b,children:"Allow camera access"}),Object(g.jsxs)(o.a,{variant:"h6",component:"p",gutterBottom:!0,color:"textSecondary",children:[Object(g.jsxs)("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",children:[Object(g.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),Object(g.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}),"Microphone:"]}),Object(g.jsx)("button",{onClick:b,type:"button"}),Object(g.jsx)(l.a,{variant:"outlined",color:"default",startIcon:Object(g.jsx)(x.a,{}),onClick:b,children:"Allow microphone access"})]}),Object(g.jsx)(s.a,{xs:12,md:1}),t&&!i&&Object(g.jsxs)(s.a,{item:!0,xs:12,md:5,children:[Object(g.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:j.name||"Name"}),Object(g.jsx)("video",{playsInline:!0,ref:c,autoPlay:!0,className:p.video})]})]})})},k=a(206),S=a(94),N=a(198),B=a(199),I=a(95),T=a.n(I),z=a(43),R=a.p+"static/media/ring-tone.ac7dc581.mp3";const W=Object(j.a)((e=>({root:{display:"flex",flexDirection:"column"},gridContainer:{width:"100%",[e.breakpoints.down("xs")]:{flexDirection:"column"}},container:{width:"600px",margin:"35px 0",padding:0,[e.breakpoints.down("xs")]:{width:"80%"}},margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid #2ea7e4"}})));var A=e=>{let{children:t}=e;const{me:a,callAccepted:c,name:i,setName:d,callEnded:j,leaveCall:m,callUser:x,startStream:b,userVideo:h}=Object(n.useContext)(y),[p,u]=Object(n.useState)(""),[O,f]=Object(n.useState)(!1),[v,C]=Object(n.useState)(!1),w=Object(n.useRef)(null);Object(n.useEffect)((()=>{!h&&c&&m()}),[h,c]),Object(n.useEffect)((()=>{v&&!c?w.current.play():w.current.pause()}),[v,c]),console.log("userVideo",h),console.log("callEnded",j);const I=W();return Object(g.jsxs)(r.a,{maxWidth:"md",children:[Object(g.jsx)("form",{className:I.root,noValidate:!0,autoComplete:"off",children:Object(g.jsxs)(s.a,{container:!0,className:I.gridContainer,children:[t&&Object(g.jsx)(s.a,{item:!0,xs:12,md:12,className:I.padding,children:t}),Object(g.jsxs)(s.a,{item:!0,xs:12,md:6,className:I.padding,children:[Object(g.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(g.jsx)(k.a,{label:"Write Your Name !",value:i,onChange:e=>d(e.target.value),fullWidth:!0}),a&&Object(g.jsx)(S.CopyToClipboard,{text:a,className:I.margin,onCopy:()=>{f(!0),b(),z.c.success("Now Send this invitaion to you friend",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light",transition:z.a})},children:Object(g.jsx)(l.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(g.jsx)(T.a,{fontSize:"large"}),style:{background:" #2ea7e4"},children:O?"Copied":" Invite !"})})]}),Object(g.jsxs)(s.a,{item:!0,xs:12,md:6,className:I.padding,children:[Object(g.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(g.jsx)(k.a,{label:"Invitaion ID to call",value:p,onChange:e=>u(e.target.value),fullWidth:!0,placeholder:"Paste Your Friend Invitaion here to call "}),c&&!j?Object(g.jsx)(l.a,{variant:"contained",color:"secondary",startIcon:Object(g.jsx)(N.a,{fontSize:"large"}),fullWidth:!0,onClick:m,className:I.margin,children:"Hang Up"}):Object(g.jsx)(l.a,{variant:"contained",color:"primary",startIcon:Object(g.jsx)(B.a,{fontSize:"large"}),fullWidth:!0,disabled:v,onClick:()=>{b(),C(!0),x(p)},className:I.margin,style:{background:" #2ea7e4"},children:"Call"}),Object(g.jsx)("audio",{ref:w,src:R,loop:!0})]})]})}),Object(g.jsx)(z.b,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,rtl:!1,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",transition:z.a})]})},V=a(200),D=a(96),E=a.n(D),U=a.p+"static/media/incoming-call.3787f889.mp3";var H=()=>{const{answerCall:e,call:t,callAccepted:a}=Object(n.useContext)(y),c=Object(n.useRef)(null);return Object(n.useEffect)((()=>{t.isReceivingCall&&!a&&c.current.play()}),[t.isReceivingCall,a]),Object(g.jsx)(g.Fragment,{children:t.isReceivingCall&&!a&&Object(g.jsxs)(s.a,{container:!0,style:{display:"flex",justifyContent:"space-around"},children:[Object(g.jsx)(s.a,{item:!0,xs:8,md:8,children:Object(g.jsx)(V.a,{in:!0,style:{transitionDelay:"500ms"},children:Object(g.jsxs)("h1",{children:[Object(g.jsx)("span",{style:{color:" #06bb0f",animation:"pulse 2s infinite"},children:t.name})," ","is calling:"]})})}),Object(g.jsx)(s.a,{item:!0,xs:4,md:4,children:Object(g.jsx)(V.a,{in:!0,style:{transitionDelay:"500ms"},children:Object(g.jsx)(l.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:e,style:{background:"#06bb0f",animation:"pulse 2s infinite"},startIcon:Object(g.jsx)(E.a,{}),children:"Answer"})})}),Object(g.jsx)("audio",{ref:c,src:U,loop:!0})]})})},M=a(201),P=a(202),F=a(203),L=a(204),Y=a(207);const J=Object(j.a)({root:{maxWidth:345},media:{height:140}});var q=function(e){let{image:t,title:a,sort:n}=e;const c=J();return Object(g.jsx)(M.a,{className:c.root,children:Object(g.jsxs)(P.a,{children:[Object(g.jsxs)(F.a,{children:[Object(g.jsx)(Y.a,{style:{marginLeft:"auto",marginRight:"auto",marginBottom:"1rem",background:"#e3f9ff",color:"#00b0e9"},children:n}),Object(g.jsx)(o.a,{gutterBottom:!0,variant:"p",color:"textPrimary",component:"p",style:{color:"#45453f",fontSize:"1rem"},children:a})]}),Object(g.jsx)(L.a,{className:c.media,image:t,title:a,style:{backgroundSize:"contain",width:"100%"}})]})})};const G=Object(j.a)((e=>({appBar:{borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid #2ea7e4",[e.breakpoints.down("xs")]:{width:"90%"}},image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}})));var K=()=>{const e=G(),[t,a]=Object(n.useState)(!1);return Object(g.jsxs)(g.Fragment,{children:[t&&Object(g.jsx)(r.a,{maxWidth:"md",children:Object(g.jsxs)("div",{className:e.wrapper,children:[Object(g.jsx)(w,{}),Object(g.jsx)(A,{children:Object(g.jsx)(H,{})})]})}),!t&&Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(r.a,{maxWidth:"md",children:Object(g.jsxs)(s.a,{container:!0,spacing:3,style:{justifyContent:"center",marginTop:"10%"},children:[Object(g.jsx)(s.a,{item:!0,xs:12,children:Object(g.jsx)(o.a,{variant:"h1",color:"primary",align:"center",style:{fontSize:"40px",color:"#2ea7e4"},children:"Talky..."})}),Object(g.jsx)(s.a,{item:!0,xs:10,children:Object(g.jsx)(o.a,{variant:"h6",component:"p",color:"textSecondary",align:"center",children:"Truly simple video chat and screen sharing between 2 people"})}),Object(g.jsx)(s.a,{item:!0,xs:3}),Object(g.jsx)(s.a,{item:!0,xs:6,children:Object(g.jsx)(l.a,{variant:"contained",color:"primary",size:"large",style:{background:"#2ea7e4",width:"100%"},onClick:()=>{a(!0)},children:"Start Chat"})}),Object(g.jsx)(s.a,{item:!0,xs:3}),Object(g.jsx)(s.a,{item:!0,xs:12,style:{marginTop:"1rem"},children:Object(g.jsx)(d.a,{})}),Object(g.jsx)(s.a,{item:!0,xs:12,style:{marginTop:"1rem"}}),Object(g.jsxs)(s.a,{container:!0,spacing:3,xs:12,children:[Object(g.jsx)(s.a,{item:!0,xs:12,md:4,children:Object(g.jsx)(q,{title:"Enter a name or click \u201cStart a Chat\u201d to create your room",image:"../first.png",sort:"1"})}),Object(g.jsx)(s.a,{item:!0,xs:12,md:4,children:Object(g.jsx)(q,{title:"Send your room link to the people you wanna Talky with",image:"../two.png",sort:"2"})}),Object(g.jsx)(s.a,{item:!0,xs:12,md:4,children:Object(g.jsx)(q,{title:"Send your room link to the people you wanna Talky with",image:"../three.png",sort:"3"})})]})]})})})]})};a(152),a(153);i.a.render(Object(g.jsx)(v,{children:Object(g.jsx)(K,{})}),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.82818584.chunk.js.map